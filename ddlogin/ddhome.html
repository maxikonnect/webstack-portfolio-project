<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
        <meta name="author" content="Abradu Frimpong Kwame">
        <meta name="description" content="An interactive platform where students can practice objective questions to enhance their exam preparation and improve their chances of success.">
        <title>Home - PassOneTouch</title>
        <!--FONT AWESOME-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">

        <!--Google Fonts-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&display=swap" rel="stylesheet">
        
        <!--Bootstrap-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
        <!--LINK TO STYLESHEET-->
        <link rel="stylesheet" href="../style/style.css">
        <link rel="stylesheet" href="../style/mediaquery.css">
    </head>
    <body>
        <header class="loggedheader" id="loggedheader">
            <div class="header-container">
              <div class="header-container-sub">
                <div id="menu-toggle-icon" class="fas fa-bars"></div> <!-- Menu Toggle Icon -->
                <div class="logo"><a href="./ddhome.html">passonetouch</a></div>
              </div>
            </div>
            <div class="menu-items">
              <div class="user"><i class="fa fa-user-circle" aria-hidden="true"></i><p>Hello Maxi</p></div>
              <div class="user" id="user-home"><i class="fa fa-building" aria-hidden="true"></i><a href="./ddhome.html">Home</a></div>
              <div class="user" id="user-start-tests"><i class="fa fa-tasks" aria-hidden="true"></i><a href="./ddtestpage.html">Start Tests</a></div>
              <div class="user"><i class="fa fa-sign-out" aria-hidden="true"></i><p>Logout</p></div>
            </div>
          </header>
          <main>
            <h1 class="visually-hidden">start tests</h1>
            <section class="scores">
                <div class="containerscores">
                    <div class="rowscores">
                        <div class="column">
                            <div class="column-score-header">
                                <div class="averageMarks">average marks: </div>
                                <div class="averageMarksPercent"> average score(Percent): </div>
                            </div> 
                        </div>
                        <div class="column">
                            <div class="column-tests">
                                <div class="tests">
                                    <p class="test">test:</p>
                                    <p class="testscore"><span>score</span></p>
                                    <p class="percentscore"><span>Mark(100%)</span></p>
                                </div>
                                <div class="tests">
                                    <p class="test#1">test1:</p>
                                    <p class="testscore1"><span> - </span></p>
                                    <p class="testscore1percent"><span> - </span></p>
                                </div>
                                <div class="tests">
                                    <p class="test#2">test2:</p>
                                    <p class="testscore2"><span> - </span></p>
                                    <p class="testscore2percent"><span> - </span></p>
                                </div>
                                <div class="tests">
                                    <p class="test#3">test3:</p>
                                    <p class="testscore3"><span> - </span></p>
                                    <p class="testscore3percent"><span> - </span></p>
                                </div>
                            </div>
                                
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- footer start -->
        <footer class="footer-sect">
            <div class="footer-logged">
                <p class="credit-para">&copy;copyright <span class="credit-span"></span> passonetouch. designed by <a href="https://github.com/maxikonnect">abradu</a></p>
            </div>
        </footer>
        <!--footer ends-->

        <!--Date update-->
        <script src="../js/date.js"></script>
        <script>
            // Function to safely extract and display results
            const averageMarks = document.querySelector(".averageMarks");
            const averageMarksPercent = document.querySelector(".averageMarksPercent");
            const averageMarksArray = [];
            const averageMarksPercentArray = [];
            
            const displayResult = (key, selector, percentValue) => {
                const result = JSON.parse(localStorage.getItem(key)) || null;
                const testScoreElement = document.querySelector(selector);
                const converttestScoreToPercent = document.querySelector(percentValue);
                
                if (result && result.totalScore !== undefined && Array.isArray(result.details)) {
                    testScoreElement.textContent = `${result.totalScore} out of ${result.details.length}`;
                    const percentMark = `${((result.totalScore / result.details.length) * 100).toFixed(2)}`;
                    converttestScoreToPercent.textContent = `${percentMark}%`;
                    averageMarksPercentArray.push(Number(percentMark));
                    averageMarksArray.push(Number(result.totalScore));
                } else {
                    testScoreElement.textContent = "Not Done";
                    converttestScoreToPercent.textContent = "Not Done";
                }
            };
        
            displayResult('quizResults1', '.testscore1', '.testscore1percent');
            displayResult('quizResults2', '.testscore2', '.testscore2percent');
            displayResult('quizResults3', '.testscore3','.testscore3percent');
            const sumMarks = averageMarksArray.reduce((acc, cum) => acc + cum, 0);
            const sumMarksPercent = averageMarksPercentArray.reduce((acc, cum)=> acc + cum, 0);

            averageMarks.textContent += `${sumMarks / averageMarksArray.length}`;
            averageMarksPercent.textContent += `${sumMarksPercent / averageMarksPercentArray.length}%`; 
        </script>
        

        <!--Toggle menu-->
        <script src="../js/menutoggle.js"></script>
        <script src="../js/loggedinmenu.js"></script>


        <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
        <script>
            AOS.init({
            duration: 600,
            delay: 200,
            });
        </script>   
    </body>
</html>