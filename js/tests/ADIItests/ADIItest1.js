const quiz = {
    scenario: `Use this scenario to answer question 6 and 7.
                Ama works as a receptionist at an educational institution. 
                Her boss just came through the door and yelled at her, 
                telling her that the front office was a mess and that she needed to get up 
                and clean it immediately. After her boss left the room, Ama grabbed some new papers 
                and violently slammed them into the dustbin.`,
    JS: [
        {
            "id": 1,
            "question": "Education stakeholders are considered more important to a school when they ……",
            "options": { "a": "Use of their power in support of the school", "b": "Raise legitimate issues about teaching", "c": "Express themselves eloquently", "d": "Emphasize the urgency of their issues" },
            "answer": "Use of their power in support of the school",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 2,
            "question": "Which of the following are the main priorities of the Ghana Education Reform Agenda?",
            "options": { 
                "a": "Improve learning outcomes", 
                "b": "Enhanced accountability", 
                "c": "Equity", 
                "d": "All of the above" 
            },
            "answer": "All of the above",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 3,
            "question": "What is the purpose of conducting research?",
            "options": {
                 "a": "To provide solutions to problems",
                  "b": "To identify a problem needing solution", 
                  "c": "To add to or contribute to knowledge", 
                  "d": "All of the above" 
            },
            "answer": "All of the above",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 4,
            "question": "In which year was the Pre-Tertiary Education Act (1049) enacted?",
            "options": { "a": "2017", "b": "2018", "c": "2019", "d": "2020" },
            "answer": "2020",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 5,
            "question": "Which of the following key qualities are required of a public officer?",
            "options": { "a": "Leadership Skills", "b": "Communication Skills", "c": "Patience and resilience", "d": "All of the above" },
            "answer": "All of the above",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 6,
            "question": "Which of the following best describes Ama’s action after being yelled at by her boss?",
            "options": { 
                "a": "An emotion", 
                "b": "An effect", 
                "c": "A thought", 
                "d": "Mood" 
            },
            "answer": "An emotion",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 7,
            "question": "Which of the following best describes the behavior of Ama’s boss?",
            "options": { 
                "a": "Rude", 
                "b": "Impolite", 
                "c": "Disrespectful", 
                "d": "Authoritarian" 
            },
            "answer": "Impolite",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 8,
            "question": "The degree to which a person identifies with his or her job, actively participates in it, and considers their performance important to self-worth is referred to as job…",
            "options": { "a": "Stability", "b": "Satisfaction", "c": "Involvement", "d": "Commitment" },
            "answer": "Involvement",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 9,
            "question": "When decision making is delegated as far down the chain of command as possible in an education system, the system is said to be…",
            "options": { 
                "a": "Flexible", 
                "b": "Decentralized", 
                "c": "Creative", 
                "d": "Centralized" 
            },
            "answer": "Decentralized",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 10,
            "question": "Which of the following is not a characteristic of a well-constructed goal for educational organizations?",
            "options": { 
                "a": "They are the results of a group decision process", 
                "b": "They are precise and measurable", 
                "c": "They are challenging but realistic", 
                "d": "They address critical issues" 
            },
            "answer": "They are the results of a group decision process",
            "score": 0,
            "selectedOption": null
        }
        {
            id: 11,
            question: "The District Director of Education's Office phone bill in 2020 is GHC 4,200.00. It increases by 10% in 2021 and a further 20% increase in the first six months of 2022. If the Director settles the bill, how much more will she have to pay at the end of June 2022?",
            options: {
                a: "GHC 5,744.00",
                b: "GHC 5,544.00",
                c: "GHC 4,620.00",
                d: "GHC 4,400.00"
            },
            answer: "GHC 5,544.00",
            score: 0,
            selectedOption: null
        },
        {
            id: 12,
            question: "Which Act established the Complementary Education Agency (CEA)?",
            options: {
                a: "2020 (Act 1058)",
                b: "2020 (Act 1055)",
                c: "2020 (Act 1023)",
                d: "2020 (Act 1049)"
            },
            answer: "2020 (Act 1055)",
            score: 0,
            selectedOption: null
        },
        {
            id: 13,
            question: "Which of the following is not a key education reform area of the Ministry of Education?",
            options: {
                a: "Pre-Tertiary Curriculum Reform through NaCCA",
                b: "Policy on Teacher Education Reforms led by the GTEC through T-TEL",
                c: "Global Citizenship Education Reform",
                d: "GES Institutional and Human Resource Reform"
            },
            answer: "Global Citizenship Education Reform",
            score: 0,
            selectedOption: null
        },
        {
            id: 14,
            question: "What is the following fallacy called? 'All ducks love water. Kofi loves water. Therefore, Kofi is a duck.'",
            options: {
                a: "Modus tollens",
                b: "Modus ponens",
                c: "Denying the antecedent",
                d: "Affirming the consequent"
            },
            answer: "Affirming the consequent",
            score: 0,
            selectedOption: null
        },
        {
            id: 15,
            question: "The 'best' approach for transformational change in a school is to have the school leader create an atmosphere for change…",
            options: {
                a: "but let others decide how to initiate a change",
                b: "but carefully set limits for the program",
                c: "and establish a reward system",
                d: "and begin establishing a vision"
            },
            answer: "and begin establishing a vision",
            score: 0,
            selectedOption: null
        },
        {
            id: 16,
            question: "Which one of the following best describes the focus of inclusive education? To increase…",
            options: {
                a: "Participation of all students in schools, including those with disabilities",
                b: "Participation of all staff in decision-making, including non-teaching staff",
                c: "Integration of various subject disciplines such as arts, science, and business",
                d: "Integration of basic, secondary, and tertiary systems of education"
            },
            answer: "Participation of all students in schools, including those with disabilities",
            score: 0,
            selectedOption: null
        },
        {
            id: 17,
            question: "The principal strategy adopted for Universal Design for Learning (UDL) is…",
            options: {
                a: "Inviting parents to attend meetings and open days",
                b: "Giving learners quizzes at the end of every lesson",
                c: "Asking parents to sign the completed assignments of learners",
                d: "Adopting multiple ways of representing content to learners"
            },
            answer: "Adopting multiple ways of representing content to learners",
            score: 0,
            selectedOption: null
        },
        {
            id: 18,
            question: "Which of the following is not one of the four pillars of secondary education reform in Ghana?",
            options: {
                a: "Promote skill development and equity",
                b: "Improve equality",
                c: "Expand physical infrastructure",
                d: "Absorb all fees paid"
            },
            answer: "Absorb all fees paid",
            score: 0,
            selectedOption: null
        },
        {
            id: 19,
            question: "Who is the Director-General of the Ghana TVET Service?",
            options: {
                a: "Mr. David Prah",
                b: "Madam Mawusi Nudekor Awity",
                c: "Madam Gifty Twum Boafo",
                d: "Dr. Fred Kyei Asamoah"
            },
            answer: "Dr. Fred Kyei Asamoah",
            score: 0,
            selectedOption: null
        },
        {
            id: 20,
            question: "The plans of school management are often expressed formally in which of the following documents?",
            options: {
                a: "Performance reports",
                b: "Ledgers",
                c: "Financial Statements",
                d: "Budgets"
            },
            answer: "Budgets",
            score: 0,
            selectedOption: null
        },
        {
            id: 21,
            question: "In an educational institution, the idolization of a charismatic leader by followers can lead to…",
            options: {
                a: "Nurtures a competitive work environment",
                b: "Limiting suggestions for fixes and improvements",
                c: "Greater understanding of the organization mission",
                d: "Difficulty in developing a successor"
            },
            answer: "Difficulty in developing a successor",
            score: 0,
            selectedOption: null
        },
        {
            id: 22,
            question: "In educational settings, since practical considerations make job tryouts for all candidates impracticable, it is necessary to… the relative level of job performance for each candidate on the basis of available information.",
            options: {
                a: "Predict",
                b: "Assign",
                c: "Accept",
                d: "Abandon"
            },
            answer: "Predict",
            score: 0,
            selectedOption: null
        },
        {
            id: 23,
            question: "Which one of the following biases refers to the fact that educational decision-makers who have strong prior beliefs about an issue tend to make decisions on the basis of these beliefs, even when presented with evidence that their beliefs are wrong?",
            options: {
                a: "Reasoning by analogy bias",
                b: "Prior hypothesis bias",
                c: "Illusion control bias",
                d: "Escalating commitment bias"
            },
            answer: "Prior hypothesis bias",
            score: 0,
            selectedOption: null
        },
        {
            id: 24,
            question: "An important first step in the process of formulating an educational institution’s mission is to…",
            options: {
                a: "Identify the client segment served by the institution",
                b: "Evaluate the institution’s most recent performance",
                c: "Decide what the institution will be like 10 years from now",
                d: "Answer the question, 'What is our business?'"
            },
            answer: "Answer the question, 'What is our business?'",
            score: 0,
            selectedOption: null
        },
        {
            id: 25,
            question: "A headmistress wanted her school to keep costs low. Therefore, as an example to others, she drove her own car to school and furnished her office with a plain, steel desk. In this case, the headmistress was displaying her…",
            options: {
                a: "Vision for success",
                b: "Emotional intelligence",
                c: "Commitment to her cause",
                d: "Astute use of power"
            },
            answer: "Commitment to her cause",
            score: 0,
            selectedOption: null
        },
        {
            id: 26,
            question: "An argument is sure to be a sound argument if it is a/an…",
            options: {
                a: "Guarantee of truth of its conclusion",
                b: "Argument with true premises",
                c: "Argument with a true conclusion",
                d: "Argument which is completely valid"
            },
            answer: "Argument with true premises",
            score: 0,
            selectedOption: null
        },
        {
            id: 27,
            question: "Teachers could be made to be more accountable when they are given the…",
            options: {
                a: "Training in teaching and examining",
                b: "Option to transfer to places where they want to serve",
                c: "Opportunity for professional growth",
                d: "Freedom to select content and methods of teaching"
            },
            answer: "Opportunity for professional growth",
            score: 0,
            selectedOption: null
        },
        {
            id: 28,
            question: "What is the population that the sample was selected from?",
            options: {
                a: "The 200 students who completed the questionnaire",
                b: "All the students and library staff",
                c: "All the senior high students",
                d: "All students in the library during the first week of the exam period"
            },
            answer: "All students in the library during the first week of the exam period",
            score: 0,
            selectedOption: null
        },
        {
            id: 29,
            question: "In the survey conducted by the library staff at the senior high school, what is the population that the school administration is interested in?",
            options: {
                a: "The 200 students who completed the questionnaire",
                b: "All the students and the library staff",
                c: "All students in the library during the first week of the exam period",
                d: "All the students enrolled at the senior high school"
            },
            answer: "All the students enrolled at the senior high school",
            score: 0,
            selectedOption: null
        },
        {
            id: 30,
            question: "What is the sample size for the survey?",
            options: {
                a: "200",
                b: "218",
                c: "205",
                d: "220"
            },
            answer: "200",
            score: 0,
            selectedOption: null
        }
        
    ]
};

// TOTAL QUIZ QUESTIONS
const totalQuestionsContainer = document.querySelector(".totalQuestionsContainer");
const entireQuestions = totalQuestionsContainer.querySelector(".totalQuestions");
entireQuestions.textContent = quiz.JS.length;

// HTML SELECTORS
const quizContainer = document.querySelector(".quizContainer");
const questionContainer = document.querySelector(".questionContainer");
const before = document.querySelector(".before");
const next = document.querySelector(".next");
const submitNotice = document.querySelector(".submitNotice");
const result = document.querySelector(".result");

// QUESTION PAGES
const totalQuestions = quiz.JS.length;
const questionsPerPage = 5;
const totalPages = Math.ceil(totalQuestions / questionsPerPage);
let currentPage = 0;

// Render questions for the current page
function setQuestions() {
    questionContainer.innerHTML = ''; 

    const startIndex = currentPage * questionsPerPage;
    const endIndex = Math.min(startIndex + questionsPerPage, totalQuestions);

    // Display scenario if it's the second page
    if (currentPage === 1) {
        const scenarioHTML = `
            <div class="scenario">
                <p><strong>Scenario:</strong> ${quiz.scenario}</p>
            </div>
        `;
        questionContainer.innerHTML += scenarioHTML;
    }

    for (let i = startIndex; i < endIndex; i++) {
        const question = quiz.JS[i];
        const questionHTML = `
            <div class="question-wrapper">
                <p class="question-text">
                    <span class="question-number">${i + 1}.</span> ${question.question}
                </p>
                <div class="options-container">
                    ${Object.entries(question.options)
                        .map(
                            ([key, value]) => `
                        <div class="option">
                            <input 
                                type="radio" 
                                id="option${key}-${i}" 
                                value="${value}" 
                                name="option${i}" 
                                class="option-input" 
                                ${question.selectedOption === value ? 'checked' : ''}
                            >
                            <label for="option${key}-${i}" class="option-label">${value}</label>
                        </div>
                    `
                        )
                        .join('')}
                </div>
            </div>
        `;
        questionContainer.innerHTML += questionHTML;
    }

    // Add event listeners for the options
    quiz.JS.slice(startIndex, endIndex).forEach((question, index) => {
        const questionIndex = startIndex + index;
        document.querySelectorAll(`input[name="option${questionIndex}"]`).forEach((radio) => {
            radio.addEventListener('change', function () {
                quiz.JS[questionIndex].selectedOption = this.value;
                quiz.JS[questionIndex].score = this.value === question.answer ? 1 : 0;

                // Save answers to localStorage
                savedAnswers[questionIndex] = this.value;
                localStorage.setItem('userAnswers', JSON.stringify(savedAnswers));
            });
        });
    });

    updateNavigationButtons();
    addSubmitButton();
}

// Update navigation button states
function updateNavigationButtons() {
    before.disabled = currentPage === 0;
    next.disabled = currentPage === totalPages - 1;
}

// Add navigation functionality
before.addEventListener('click', () => {
    if (currentPage > 0) {
        currentPage--;
        setQuestions();
    }
});

next.addEventListener('click', () => {
    if (currentPage < totalPages - 1) {
        currentPage++;
        setQuestions();
    }
});

// Add the "Submit Test" button
function addSubmitButton() {
    result.innerHTML = '';
    submitNotice.innerHTML = '';

    let submitText = document.createElement('p');
    submitText.textContent = 'Finished With Test. View Results';
    submitNotice.appendChild(submitText);

    let submit = document.createElement('button');
    submit.textContent = 'View Results';
    submit.addEventListener('click', validateAndShowScore);
    result.appendChild(submit);
}

// Validate and show score
function validateAndShowScore() {
    const unansweredQuestions = [];
    quiz.JS.forEach((q, index) => {
        if (q.selectedOption === null) {
            unansweredQuestions.push(`Question ${index + 1}`);
        }
    });

    if (unansweredQuestions.length > 0) {
        alert(`Please answer the following questions before submitting:\n${unansweredQuestions.join('\n')}`);
        return;
    }

    showScore();
}

// Show the score and store results in localStorage
function showScore() {
    const totalScore = quiz.JS.reduce((total, question) => total + question.score, 0);
    const correctAnswers = quiz.JS.filter(q => q.score === 1).length;
    const wrongAnswers = quiz.JS.filter(q => q.score === 0).length;

    const results = {
        totalScore: totalScore,
        correctAnswers: correctAnswers,
        wrongAnswers: wrongAnswers,
        details: quiz.JS.map(q => ({
            question: q.question,
            selectedOption: q.selectedOption,
            correctAnswer: q.answer,
            isCorrect: q.score === 1
        }))
    };

    localStorage.setItem('quizResults', JSON.stringify(results));
    window.location.href = './result1.html'; // Navigate to the results page
}

// Initialize the quiz
setQuestions();
