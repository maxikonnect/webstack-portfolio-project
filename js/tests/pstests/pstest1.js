const quiz = {
    JS: [
        {
            "id": 1,
            "question": "Which council is responsible for submitting to the Minister Of Education, recommendation for Pre-Tertiary-Education?",
            "options": { "a": "council of state", "b": "council of elders", "c": "council for special initiative", "d": "GES council" },
            "answer": "GES council",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 2,
            "question": "What name is given to the highest decision making body of GES?",
            "options": { "a": "council of state", "b": "council of elders", "c": "council for special initiative", "d": "GES council" },
            "answer": "GES council",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 3,
            "question": "How many members constitute the GES Council?",
            "options": { "a": "5", "b": "10", "c": "12", "d": "15" },
            "answer": "15",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 4,
            "question": "How many deputy directors do we have in GES?",
            "options": { "a": "2", "b": "3", "c": "4", "d": "5" },
            "answer": "2",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 5,
            "question": "What are the portfolios of the two deputy Director-Generals of GES?",
            "options": { "a": "Management Services and Quality&Access", "b": "Logistics and Planning", "c": "Finance and Administration", "d": "Basic Education and Secondary Education" },
            "answer": "Management Services and Quality&Access",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 6,
            "question": "How many divisional Directors comes under the deputy director general quality and access",
            "options": { "a": "3", "b": "5", "c": "7", "d": "9" },
            "answer": "7",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 7,
            "question": "How many divisional directors comes under the deputy director general management services",
            "options": { "a": "3", "b": "5", "c": "7", "d": "9" },
            "answer": "3",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 8,
            "question": "How many divisional directors are in GES headquarters?",
            "options": { "a": "10", "b": "12", "c": "14", "d": "15" },
            "answer": "10",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 9,
            "question": "Which of the following divisions fall under the Deputy Director-General management services?",
            "options": { "a": "Suppliers and Logistics Division", "b": "Human Resource Management and Development", "c": "Administration and Finance", "d": "All the above" },
            "answer": "All the above",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 10,
            "question": "All the following divisions comes under the Deputy Director General in charge of quality and access except",
            "options": { "a": "Administration and Finance", "b": "Special education division", "c": "Basic education division", "d": "Secondary education division"},
            "answer": "Administration and Finance",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 11,
            "question": "The division of the ministry that provides education to illiterate adults is known as.....",
            "options": { "a": "Informal Education Division", "b": "Adult literacy Division", "c": "Adult illiteracy Division", "d": "non-formal Education Division" },
            "answer": "non-formal Education Division",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 12,
            "question": " All are district support structures in education in Ghana except...",
            "options": { "a": "PTA", "b": "SMC", "c": "DEOC", "d": "GES council" },
            "answer": "GES council",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 13,
            "question": "Which organization implements pre tertiary education in Ghana",
            "options": { "a": "GES", "b": "PTA", "c": "SMC", "d": "SEG" },
            "answer": "GES",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 14,
            "question": "Which act has amended the function of GES",
            "options": { "a": "Education Act 2008, act 778 ", "b": "Education Act 2006, act 678 ", "c": "Education Act 2000, act 778 ", "d": "Education Act 2004, act 768 " },
            "answer": "Education Act 2008, act 778",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 15,
            "question": "Which autonomous body develops curriculum for schools in Ghana",
            "options": { "a": "NCCA", "b": "NaCCA", "c": "NCCE", "d": "CCE" },
            "answer": "NaCCA",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 16,
            "question": "What legal relations exits between you and GES",
            "options": { "a": "working relationship", "b": "actual relationship", "c": "Contractual relationship ", "d": "personal relationship" },
            "answer": "Contractual relationship ",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 17,
            "question": "What regulates the behaviour of a profession?",
            "options": { "a": "Code of ethics", "b": "Professional conduct", "c": "Legal codes", "d": "Constitution" },
            "answer": "Code of ethics",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 18,
            "question": "The new structure and content of education conceived the JSS concept in which year?",
            "options": { "a": "1974", "b": "1987", "c": "1992", "d": "1969" },
            "answer": "1974",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 19,
            "question": "The most important function of a teacher is to ....",
            "options": { "a": "Discipline students", "b": "Facilitate learning", "c": "Prepare lesson plans", "d": "Supervise activities" },
            "answer": "Facilitate learning",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 20,
            "question": "How many management levels does Ghana Education Service have?",
            "options": { "a": "3", "b": "4", "c": "5", "d": "6" },
            "answer": "4",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 21,
            "question": "Who is the CEO of the National Management Level in GES at the headquarters?",
            "options": { "a": "Director-General", "b": "Regional Director", "c": "District Director", "d": "Minister of Education" },
            "answer": "Director-General",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 22,
            "question": "Which entity settles disputes between employer and employee?",
            "options": { "a": "National Labour Commission", "b": "Public Services Commission", "c": "Ministry of Labour", "d": "Supreme Court" },
            "answer": "National Labour Commission",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 23,
            "question": "Which organization is responsible for the nation's fiscal policies?",
            "options": { "a": "Ministry of Finance", "b": "Bank of Ghana", "c": "National Treasury", "d": "Parliament" },
            "answer": "Ministry of Finance",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 24,
            "question": "Which entity is in charge of the monetary policies of the country?",
            "options": { "a": "Ministry of Finance", "b": "Bank of Ghana", "c": "National Development Bank", "d": "World Bank" },
            "answer": "Bank of Ghana",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 25,
            "question": "Which commission is responsible for setting standards for appointments, promotions, and discipline for public sector employees?",
            "options": { "a": "National Labour Commission", "b": "Public Services Commission", "c": "Civil Service Council", "d": "GES Council" },
            "answer": "Public Services Commission",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 26,
            "question": "Who is in charge of the Regional Management Level in GES?",
            "options": { "a": "Regional Director", "b": "District Director", "c": "School Head", "d": "Director-General" },
            "answer": "Regional Director",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 27,
            "question": "When was the continuation schools instituted?",
            "options": { "a": "1964", "b": "1961", "c": "1957", "d": "1974" },
            "answer": "1964",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 28,
            "question": "Which policy was introduced in 1961?",
            "options": { "a": "Fee-free universal primary education", "b": "GES Act 2008", "c": "Education Reform Policy", "d": "Basic Education Policy" },
            "answer": "Fee-free universal primary education",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 29,
            "question": "Which act has changed the face of GES?",
            "options": { "a": "GES Act 2008, Act 778", "b": "Labour Act 2003", "c": "Education Act 1961", "d": "Public Services Act 1993" },
            "answer": "GES Act 2008, Act 778",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 30,
            "question": "Where did the colonial traders start education in Ghana in 1529?",
            "options": { "a": "Elmina", "b": "Cape Coast", "c": "Kumasi", "d": "Accra" },
            "answer": "Elmina",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 31,
            "question": "When was the JSS fully implemented?",
            "options": { "a": "1987", "b": "1974", "c": "1992", "d": "1976" },
            "answer": "1987",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 32,
            "question": "Which year was the JSS piloted?",
            "options": { "a": "1976", "b": "1987", "c": "1974", "d": "1964" },
            "answer": "1976",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 33,
            "question": "When was the JSS idea conceived?",
            "options": { "a": "1974", "b": "1976", "c": "1987", "d": "1961" },
            "answer": "1974",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 34,
            "question": "Which of the following is not an autonomous body of GES?",
            "options": { "a": "NIB", "b": "Ghana Library Authority", "c": "NTC", "d": "NaCCA" },
            "answer": "Ghana Library Authority",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 35,
            "question": "Which governing authority is responsible for matters relating to the licensing of teachers?",
            "options": { "a": "NTC", "b": "GES", "c": "NaCCA", "d": "NIB" },
            "answer": "NTC",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 36,
            "question": "Which is not a component of the educational system?",
            "options": { "a": "Stakeholders", "b": "Content", "c": "Physical infrastructure", "d": "Decentralization" },
            "answer": "Decentralization",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 37,
            "question": "Which is not a function of MoE?",
            "options": { "a": "Demarcation of Constituencies", "b": "Policy Formulation", "c": "Resource Allocation", "d": "Oversight of GES" },
            "answer": "Demarcation of Constituencies",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 38,
            "question": "What term is given to the benefits that accrue to society from the education of an individual and the benefits that an educated person receives for his or her education?",
            "options": { "a": "Externalities of Education", "b": "Social Benefits", "c": "Educational Gains", "d": "Human Capital" },
            "answer": "Externalities of Education",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 39,
            "question": "What name is given to the fund set up by the government to support educational activities and infrastructure?",
            "options": { "a": "GET Fund", "b": "Education Trust Fund", "c": "Infrastructure Support Fund", "d": "National Education Fund" },
            "answer": "GET Fund",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 40,
            "question": "What does the government use to address issues in order to achieve results or objectives?",
            "options": { "a": "Policies", "b": "Legislations", "c": "Budget Allocations", "d": "Directives" },
            "answer": "Policies",
            "score": 0,
            "selectedOption": null
        },
        {
            "id": 41,
            "question": "Which age does basic education commence?",
            "options": { "a": "4 years", "b": "5 years", "c": "3 years", "d": "6 years" },
            "answer": "4 years",
            "score": 0,
            "selectedOption": null
        }
    ]
};


// TOTAL QUIZ QUESTIONS
const totalQuestionsContainer = document.querySelector(".totalQuestionsContainer");
const entireQuestions = totalQuestionsContainer.querySelector(".totalQuestions");
entireQuestions.textContent = quiz.JS.length;


//HTML SELECTORS
const quizContainer = document.querySelector(".quizContainer");
const questionContainer = document.querySelector(".questionContainer");
const before = document.querySelector(".before");
const next = document.querySelector(".next");
const submitNotice = document.querySelector(".submitNotice");
const result = document.querySelector(".result");

//QUESTION PAGES
const totalQuestions = quiz.JS.length;
const questionsPerPage = 5;
const totalPages = Math.ceil(totalQuestions / questionsPerPage);
let currentPage = 0;

 

 // Render questions for the current page
 function setQuestions() {
    questionContainer.innerHTML = ''; 

    const startIndex = currentPage * questionsPerPage;
    const endIndex = Math.min(startIndex + questionsPerPage, totalQuestions);

    for (let i = startIndex; i < endIndex; i++) {
        const question = quiz.JS[i];
        const questionHTML = `
            <div class="question-wrapper">
                <p class="question-text">
                    <span class="question-number">${i + 1}.</span> ${question.question}
                </p>
                <div class="options-container">
                    ${Object.entries(question.options)
                        .map(
                            ([key, value]) => `
                        <div class="option">
                            <input 
                                type="radio" 
                                id="option${key}-${i}" 
                                value="${value}" 
                                name="option${i}" 
                                class="option-input" 
                                ${question.selectedOption === value ? 'checked' : ''}
                            >
                            <label for="option${key}-${i}" class="option-label">${value}</label>
                        </div>
                    `
                        )
                        .join('')}
                </div>
            </div>
        `;
        questionContainer.innerHTML += questionHTML;
    }

    // Add event listeners for the options
    quiz.JS.slice(startIndex, endIndex).forEach((question, index) => {
        const questionIndex = startIndex + index;
        document.querySelectorAll(`input[name="option${questionIndex}"]`).forEach((radio) => {
            radio.addEventListener('change', function () {
                quiz.JS[questionIndex].selectedOption = this.value;
                quiz.JS[questionIndex].score = this.value === question.answer ? 1 : 0;

                // Save answers to localStorage
                savedAnswers[questionIndex] = this.value;
                localStorage.setItem('userAnswers', JSON.stringify(savedAnswers));
            });
        });
    });

    updateNavigationButtons();
    addSubmitButton();
}


 // Update navigation button states
 function updateNavigationButtons() {
     before.disabled = currentPage === 0;
     next.disabled = currentPage === totalPages - 1;
 }

 // Add navigation functionality
 before.addEventListener('click', () => {
     if (currentPage > 0) {
         currentPage--;
         setQuestions();
     }
 });

 next.addEventListener('click', () => {
     if (currentPage < totalPages - 1) {
         currentPage++;
         setQuestions();
     }
 });

 // Add the "Submit Test" button
 function addSubmitButton() {
     result.innerHTML = '';
     submitNotice.innerHTML = '';

     let submitText = document.createElement('p');
     submitText.textContent = 'Finished With Test. View Results';
     submitNotice.appendChild(submitText);

     let submit = document.createElement('button');
     submit.textContent = 'View Results';
     submit.addEventListener('click', validateAndShowScore);
     result.appendChild(submit);
 }

 // Validate and show score
 function validateAndShowScore() {
     const unansweredQuestions = [];
     quiz.JS.forEach((q, index) => {
         if (q.selectedOption === null) {
             unansweredQuestions.push(`Question ${index + 1}`);
         }
     });

     if (unansweredQuestions.length > 0) {
         alert(`Please answer the following questions before submitting:\n${unansweredQuestions.join('\n')}`);
         return;
     }

     showScore();
 }

 // Show the score and store results in localStorage
 function showScore() {
     const totalScore = quiz.JS.reduce((total, question) => total + question.score, 0);
     const correctAnswers = quiz.JS.filter(q => q.score === 1).length;
     const wrongAnswers = quiz.JS.filter(q => q.score === 0).length;

     const results = {
         totalScore: totalScore,
         correctAnswers: correctAnswers,
         wrongAnswers: wrongAnswers,
         details: quiz.JS.map(q => ({
             question: q.question,
             selectedOption: q.selectedOption,
             correctAnswer: q.answer,
             isCorrect: q.score === 1
         }))
     };

     localStorage.setItem('quizResults', JSON.stringify(results));
     window.location.href = './result1.html'; // Navigate to the results page
 }

 // Initialize the quiz
 setQuestions();